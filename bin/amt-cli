#!/usr/bin/env node

const sade = require("sade");
const convert = require("../src/convert");
const generate = require("../src/generate");
const modify = require("../src/modify");

const prog = sade("amt-cli");

prog.version('1.0.0');

prog
  .command("convert <input> <output>")
  .option("-d, --date", "The format of dates in the input file", "MM/DD/YYYY")
  .option("-s, --separator", "The separator used in the input file", "|")
  .describe("Transform a character separated file into a csv")
  .action(convert.execute);

prog
  .command("generate <output>")
  .option("-c, --count", "The number of rows to generate", 10e3 + 1)
  .option("-e, --email", "The email provider used on generated email addresses", "gomerits.testing.com")
  .option("-f, --filter", "The filtered list of headers to use", "email,firstName,lastName,city,state,zipCode,licenseNumber,dateIssued,expirationDate,suspended,revoked,revokeReason,longText")
  .option("-m, --memberless", "Whether the spreadsheet should only have memberless merits", false)
  .describe("Generate a large fake dataset for load testing automate merits")
  .action(generate.execute);

prog
  .command("modify <input> <output>")
  .option("-e, --email", "The email provider used on generated email addresses", "gomerits.testing.com")
  .option("-o, --operations", "A common separated list of changes to apply", "edit,transfer,revoke")
  .describe("Given a csv generated by this tool perform a set of changes and output a new csv")
  .action(modify.execute);

prog.parse(process.argv);
